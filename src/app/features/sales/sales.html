<div class="form-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Registrar Nueva Venta</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="saleForm" (ngSubmit)="onSubmit()">

        <!-- Service Selector -->
        <mat-form-field appearance="fill">
          <mat-label>Servicio</mat-label>
          <mat-select formControlName="serviceId">
            @for (service of services(); track service.id) {
              <mat-option [value]="service.id">{{ service.name }}</mat-option>
            }
          </mat-select>
          @if (saleForm.get('serviceId')?.hasError('required')) {
            <mat-error>El servicio es requerido.</mat-error>
          }
        </mat-form-field>

        <!-- Client Name -->
        <mat-form-field appearance="fill">
          <mat-label>Nombre del Cliente</mat-label>
          <input matInput formControlName="clientName" placeholder="Ej. Ana PÃ©rez">
          @if (saleForm.get('clientName')?.hasError('required')) {
            <mat-error>El nombre del cliente es requerido.</mat-error>
          }
        </mat-form-field>

        <!-- Amount Paid -->
        <mat-form-field appearance="fill">
          <mat-label>Monto Pagado</mat-label>
          <input matInput type="number" formControlName="amountPaid" placeholder="0.00">
           @if (saleForm.get('amountPaid')?.hasError('required')) {
            <mat-error>El monto es requerido.</mat-error>
          }
          @if (saleForm.get('amountPaid')?.hasError('min')) {
            <mat-error>El monto no puede ser negativo.</mat-error>
          }
        </mat-form-field>

        <button mat-raised-button color="primary" type="submit" [disabled]="!saleForm.valid">
          Registrar Venta
        </button>

      </form>
    </mat-card-content>
  </mat-card>
</div>
